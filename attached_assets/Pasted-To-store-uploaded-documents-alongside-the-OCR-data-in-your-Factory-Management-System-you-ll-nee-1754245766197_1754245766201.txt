To **store uploaded documents** alongside the OCR data in your Factory Management System, youâ€™ll need to enhance your architecture to include a **document storage system** with metadata and linkage to respective modules.

---

## âœ… Document Upload + OCR + Storage Workflow

### ğŸ”„ Full Flow:

```
[User Uploads PDF/Image]
        â†“
[Save file to storage (e.g., /uploads or S3)]
        â†“
[Run Preprocessing + OCR]
        â†“
[Extract Fields â†’ Show Editable Preview]
        â†“
[User Confirms â†’ Save structured data + file path]
```

---

## ğŸ—ƒï¸ Database Schema (Suggested)

### ğŸ“„ `DocumentUpload` Table

| Field           | Type       | Description                              |
| --------------- | ---------- | ---------------------------------------- |
| id              | UUID / INT | Primary key                              |
| file\_name      | TEXT       | Original file name                       |
| file\_path      | TEXT       | Server path or S3 URL                    |
| doc\_type       | ENUM       | `'PO'`, `'Invoice'`, `'GRN'`, etc.       |
| related\_module | TEXT       | Related module/table (e.g., `po`, `grn`) |
| related\_id     | INT / UUID | ID from related module (PO ID, etc.)     |
| upload\_by      | INT        | User ID                                  |
| upload\_at      | TIMESTAMP  | Upload date                              |

---

## ğŸ“¦ Where to Save Documents?

* âœ… Local path: `/uploads/invoices/2025-08-03/filename.pdf`
* âœ… Or cloud: Amazon S3 / Google Drive / Supabase Storage (free)
* âœ… Save metadata in DB with link

---

## ğŸ§© Integration Points with System Modules

| Module       | OCR Doc Attachment Saved As |
| ------------ | --------------------------- |
| PO           | PO Document                 |
| GRN          | Delivery Challan            |
| Job Work     | Job Work Return Slip        |
| Invoice      | Vendor Bill or GST Invoice  |
| Production   | Shop Floor Sheet            |
| Expense      | Freight/Electricity Bill    |
| Tally Import | Scanned Ledger              |

ğŸ“ Each module links the uploaded file to its record and shows a **download/view** option in the form or history page.

---

## ğŸ“¥ Flask Integration Snippet

```python
# Save file
file = request.files['document']
filename = secure_filename(file.filename)
filepath = os.path.join(UPLOAD_FOLDER, filename)
file.save(filepath)

# Save to DB
document = DocumentUpload(
    file_name=filename,
    file_path=filepath,
    doc_type='invoice',
    related_module='grn',
    related_id=grn_id,
    upload_by=current_user.id
)
db.session.add(document)
db.session.commit()
```

---

## ğŸ–¥ï¸ UI Suggestion: Attachments Section

For each module form:

```
ğŸ“ Attachments
-------------------------
[Upload File]  [OCR & Preview]
- Invoice_PO_245.pdf     [ğŸ‘ View] [â¬ Download]
- JobWork_Return_123.jpg [ğŸ‘ View]
```

---

## ğŸ” Security Considerations

* âœ”ï¸ Restrict file types (PDF, JPG, PNG)
* âœ”ï¸ Set upload size limits
* âœ”ï¸ Store with hashed filename if needed
* âœ”ï¸ Serve files via secure URL with permission checks

---

Would you like:

* A sample file upload form + Flask route?
* Integration with Supabase Storage (free, cloud)?
* A central "Document Center" in dashboard?

Let me know!
